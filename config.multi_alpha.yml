# Multi-Alpha Trading System Configuration
# ===========================================================================
# Configuration for data hub and strategy workers
# Environment variables can be interpolated using ${VAR_NAME} syntax
# ===========================================================================

# Databento API configuration
databento:
  api_key: ${DATABENTO_API_KEY}
  dataset: GLBX.MDP3
  schema: trades
  stype_in: product_id

# Data Hub configuration
data_hub:
  redis_host: localhost
  redis_port: 6379
  publish_channels:
    - market
  heartbeat_file: /var/run/pine/data_hub_heartbeat.json
  heartbeat_interval: 30

# Contract map and models
contract_map_path: Data/Databento_contract_map.yml
models_path: models

# Portfolio-level settings
portfolio:
  starting_cash: 250000
  max_positions: 2
  daily_stop_loss: 2500

# Strategy definitions
strategies:
  ibs_a:
    enabled: true
    strategy_name: "IBS A"
    strategy_type: ibs
    traderspost_webhook_url: ${TRADERSPOST_IBS_A_WEBHOOK}
    discord_webhook_url: ${DISCORD_WEBHOOK_URL}
    instruments:
      - 6A
      - 6C
      - 6M
      - CL
      - GC
      - HG
    starting_cash: 250000
    max_positions: 2
    daily_stop_loss: 2500
    ml_enabled: true

  ibs_b:
    enabled: false
    strategy_name: "IBS B"
    strategy_type: ibs
    traderspost_webhook_url: ${TRADERSPOST_IBS_B_WEBHOOK}
    discord_webhook_url: ${DISCORD_WEBHOOK_URL}
    instruments:
      - 6B
      - 6E
      - 6J
      - 6N
      - 6S
      - SI
    starting_cash: 250000
    max_positions: 2
    daily_stop_loss: 2500
    ml_enabled: true

  breakout:
    enabled: false
    strategy_name: "Breakout"
    strategy_type: breakout
    traderspost_webhook_url: ${TRADERSPOST_BREAKOUT_WEBHOOK}
    discord_webhook_url: ${DISCORD_WEBHOOK_URL}
    instruments:
      - ES
      - NQ
      - RTY
      - YM
    starting_cash: 250000
    max_positions: 2
    daily_stop_loss: 2500
    ml_enabled: false

# Instrument definitions (contract specifications)
instruments:
  # Equity Index Futures
  ES:
    symbol: ES
    size: 1
    commission: 4.0
    multiplier: 50
    margin: 13200
    databento_product_id: ES.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: ES

  NQ:
    symbol: NQ
    size: 1
    commission: 4.0
    multiplier: 20
    margin: 17600
    databento_product_id: NQ.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: NQ

  YM:
    symbol: YM
    size: 1
    commission: 4.0
    multiplier: 5
    margin: 8250
    databento_product_id: YM.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: YM

  RTY:
    symbol: RTY
    size: 1
    commission: 4.0
    multiplier: 50
    margin: 5500
    databento_product_id: RTY.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: RTY

  # Currency Futures
  6A:
    symbol: 6A
    size: 1
    commission: 4.5
    multiplier: 100000
    margin: 2310
    databento_product_id: 6A.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: AUD

  6B:
    symbol: 6B
    size: 1
    commission: 4.5
    multiplier: 62500
    margin: 2640
    databento_product_id: 6B.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: GBP

  6C:
    symbol: 6C
    size: 1
    commission: 4.5
    multiplier: 100000
    margin: 2200
    databento_product_id: 6C.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: CAD

  6E:
    symbol: 6E
    size: 1
    commission: 4.5
    multiplier: 125000
    margin: 2750
    databento_product_id: 6E.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: EUR

  6J:
    symbol: 6J
    size: 1
    commission: 4.5
    multiplier: 12500000
    margin: 3300
    databento_product_id: 6J.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: JPY

  6M:
    symbol: 6M
    size: 1
    commission: 4.5
    multiplier: 500000
    margin: 2970
    databento_product_id: 6M.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: MXN

  6N:
    symbol: 6N
    size: 1
    commission: 4.5
    multiplier: 100000
    margin: 2090
    databento_product_id: 6N.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: NZD

  6S:
    symbol: 6S
    size: 1
    commission: 4.5
    multiplier: 125000
    margin: 3080
    databento_product_id: 6S.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: CHF

  # Energy Futures
  CL:
    symbol: CL
    size: 1
    commission: 4.5
    multiplier: 1000
    margin: 7150
    databento_product_id: CL.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: CL

  NG:
    symbol: NG
    size: 1
    commission: 4.5
    multiplier: 10000
    margin: 4400
    databento_product_id: NG.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: NG

  # Metals Futures
  GC:
    symbol: GC
    size: 1
    commission: 4.5
    multiplier: 100
    margin: 10450
    databento_product_id: GC.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: GC

  SI:
    symbol: SI
    size: 1
    commission: 4.5
    multiplier: 5000
    margin: 9900
    databento_product_id: SI.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: SI

  HG:
    symbol: HG
    size: 1
    commission: 4.5
    multiplier: 25000
    margin: 4400
    databento_product_id: HG.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: HG

  PL:
    symbol: PL
    size: 1
    commission: 4.5
    multiplier: 50
    margin: 2530
    databento_product_id: PL.FUT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: PL

  # Fixed Income ETF
  TLT:
    symbol: TLT
    size: 1
    commission: 4.0
    multiplier: 1
    margin: 100
    databento_product_id: TLT
    databento_dataset: GLBX.MDP3
    tradovate_symbol: TLT

# Dashboard configuration
dashboard_port: 5000
dashboard_strategies:
  - ibs_a
  - ibs_b
  - breakout
